namespace = TFE_major_decisions

### A New Imperial Faith
### Reopening the Catechetical School of Alexandria


################
# A New Imperial Faith
# TFE_major_decisions.0001

# For the one who proclaimed the new Imperial faith...
TFE_major_decisions.0001 = {
	type = character_event
	title = TFE_major_decisions.0001.t
	desc = {
		desc = TFE_major_decisions.0001.desc_intro
		first_valid = {
			triggered_desc = {
				trigger = { scope:new_faith = { has_doctrine = doctrine_pluralism_pluralistic } }
				desc = TFE_major_decisions.0001.desc_pluralistic
			}
			triggered_desc = {
				trigger = { scope:new_faith = { has_doctrine = doctrine_pluralism_righteous } }
				desc = TFE_major_decisions.0001.desc_righteous
			}
			triggered_desc = {
				trigger = { scope:new_faith = { has_doctrine = doctrine_pluralism_fundamentalist } }
				desc = TFE_major_decisions.0001.desc_fundamentalist
			}
		}
		desc = TFE_major_decisions.0001.desc_end
	}
	
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	immediate = {
		new_official_imperial_faith_effect = yes
	}

	option = {
		name = TFE_major_decisions.0001.a
	}
}

TFE_major_decisions.0002 = {
	type = character_event
	title = TFE_major_decisions.0002.t
	desc = {
		desc = TFE_major_decisions.0002.desc
	}
	
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	immediate = {
		reject_official_imperial_faith_effect = yes
	}

	option = {
		name = TFE_major_decisions.0002.a
	}
}

# # And everyone else!
# TFE_major_decisions.0002 = {
	# type = character_event
	# title = TFE_major_decisions.0001.t
	# desc = TFE_major_decisions.0002.desc
	# theme = faith
	
	# left_portrait = {
		# character = root
		# animation = personality_zealous
	# }
	
	# immediate = {
		# show_as_tooltip = { new_official_imperial_faith_effect = yes }
	# }

	# # Poggerino
	# option = {
		# trigger = { faith = scope:new_faith }
		# name = TFE_major_decisions.0002.a
	# }

	# # Interesting...
	# option = {
		# trigger = {
			# NOT = { faith = scope:new_faith  }
			# faith = { faith_hostility_level = { target = scope:new_faith value <= faith_astray_level } }
		# }
		# name = TFE_major_decisions.0002.b
	# }

	# # A worrying development
	# option = {
		# trigger = { faith = { faith_hostility_level = { target = scope:new_faith value = faith_hostile_level } } }
		# name = TFE_major_decisions.0002.c
	# }

	# # This won't save them!
	# option = {
		# trigger = { faith = { faith_hostility_level = { target = scope:new_faith value = faith_evil_level } } }
		# name = TFE_major_decisions.0002.d
	# }
# }

################
# Reopening the Catechetical School of Alexandria
# TFE_major_decisions.0010
TFE_major_decisions.0010 = {
	type = character_event
	title = TFE_major_decisions.0010.t
	desc = TFE_major_decisions.0010.desc
	
	theme = faith
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	immediate = { reopen_catechetical_school_alexandria_effect = { MAIN_FAITH = root.faith } }

	option = {
		name = TFE_major_decisions.0010.a
	}
}



#Case of the Suebians By Sherif
TFE_major_decisions.0023 = {
	type = character_event
	title = TFE_major_decisions.0023.t
	desc = TFE_major_decisions.0023.desc
	immediate = { 
		if = {
			limit = {
				title:k_suebians_of_gallicia = {
					is_title_created = yes
				}
			}
			title:k_suebians_of_gallicia.holder = { save_scope_as = scope:event_target }
		}
		else = {
			title:k_suebi.holder = { save_scope_as = scope:event_target }
		}
	}
	theme = martial
	right_portrait = {
		character = root
		animation = war_attacker
	}
	option = { #They are part of Hispania and therefore must be subject to our power
		name = TFE_major_decisions.0023.a
		if = {
			limit = {
				title:k_suebians_of_gallicia = {
					is_title_created = yes
				}
			}
			add_pressed_claim = title:k_suebians_of_gallicia
		}
		else = {
			add_pressed_claim = title:k_suebi
		}
			
	}
	option = { #Galicia is a territory apart from Hispania now. We must focus on our own lands.
		name = TFE_major_decisions.0023.b
		if = {
			limit = {
				title:k_suebians_of_gallicia = {
					is_title_created = yes
				}
			}
			reverse_add_opinion = {
				opinion = 200
				modifier = respected_independece
				years = 10
				target = title:k_suebians_of_gallicia.holder
			}
		}
		else = {
			reverse_add_opinion = {
				opinion = 200
				modifier = respected_independece
				years = 10
				target = title:k_suebi.holder
			}
		}
	}
}

TFE_major_decisions.6666 = {
	type = character_event
	title = TFE_major_decisions.6666.t
	desc = TFE_major_decisions.6666.desc
	theme = war
	left_portrait = {
		character = root
		animation = personality_vengeful
	}
	override_background = { reference = wilderness_steppe }
	
	immediate = {
		play_music_cue = "mx_cue_crusade_starts"
		reunite_black_huns_effect = yes	
	}

	option = {
		name = TFE_major_decisions.6666.a
		add_trait = heir_of_attila
		if = {
			limit = { has_any_nickname = yes }
			remove_nickname = yes
		}
		give_nickname = nick_scourge_of_god
		if = {
			limit = {
				prestige_level < 5
			}
			add_prestige_level = 1
		}
	}
}

#My ruler became heir to Attila
TFE_major_decisions.6667 = {
	type = character_event
	title = TFE_major_decisions.6667.t
	desc = TFE_major_decisions.6667.desc
	theme = war
	left_portrait = {
		character = scope:heir_of_attila
		animation = personality_vengeful
	}
	override_background = { reference = wilderness_steppe }
	
	immediate = {
		play_music_cue = "mx_cue_crusade_starts"
		show_as_tooltip = {
			scope:heir_of_attila = {
				add_trait_force_tooltip = heir_of_attila
				hidden_effect = { set_primary_title_to = title:e_hunnic_empire }
			}
		}
	}

	option = {
		name = TFE_major_decisions.6667.a
	}
}

#Someone became heir to Attila
TFE_major_decisions.6668 = {
	type = character_event
	title = TFE_major_decisions.6667.t
	desc = TFE_major_decisions.6668.desc
	theme = war
	left_portrait = {
		character = scope:heir_of_attila
		animation = personality_vengeful
	}
	override_background = { reference = wilderness_steppe }

	immediate = {
		play_music_cue = "mx_cue_combat_2"
		show_as_tooltip = {
			scope:heir_of_attila = {
				add_trait_force_tooltip = heir_of_attila
				hidden_effect = { set_primary_title_to = title:e_hunnic_empire }
			}
		}
	}

	option = {
		name = {
			text = TFE_major_decisions.6668.a.neighbor
			trigger = {
				any_neighboring_top_liege_realm_owner = {
					this = scope:heir_of_attila
				}
			}
		}
		name = {
			text = TFE_major_decisions.6668.a.distant
		}
	}
}
