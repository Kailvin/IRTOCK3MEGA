namespace = gothic_wars

########################################
## 0001-0004: King of the Goths       ##
## 0011-0016: Invasion of Radagaisus  ##
########################################





## Event for Radagaisus' execution - Hróð
gothic_wars.0016 = {
	scope = none
	hidden = yes

	# Execution
	immediate = {
		title:k_goths.holder = {
			death = {
				death_reason = death_execution
				killer = IMPRISONER
			}
		}
		scope:dead = {
			every_close_family_member = {
				limit = { NOT = { this = IMPRISONER } }
				add_opinion = {
					modifier = pleased_opinion
					opinion = 30
					target = IMPRISONER
				}
			}
		}
		execute_opinion_effect = { VICTIM = title:k_goths.holder EXECUTIONER = IMPRISONER }
	}
}

gothic_wars.0017 = {
	scope = none
	hidden = yes

	# Execution
	immediate = {
		theodric_tributary_effect = yes
	}
}

gothic_wars.0018 = {
	scope = none
	hidden = yes

	immediate = {
		trigger_event = gothic_wars.0022
		trigger_event = gothic_wars.0023
		trigger_event = {
			id = gothic_wars.0024
			days = 1
		}
	}
}

gothic_wars.0019 = {
	type = character_event
	theme = war
	title = gothic_wars_0019.t
	desc = gothic_wars_0019.desc

	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {
		name = gothic_wars_0019.a
		custom_tooltip = gothic_wars_0019.a.tt
		hidden_effect = { start_suebi_migration_effect = yes }
		spawn_army = {
			name = "Suebic Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = province:4147
			inheritable = no
		}
		spawn_army = {
			name = "Suebic Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = province:4147
			inheritable = no
		}
		spawn_army = {
			name = "Suebic Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = province:4147
			inheritable = yes
		}
		spawn_army = {
			name = "Suebic Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = province:4147
			inheritable = yes
		}
		ai_chance = { base = 100 }
	}
	option = {
		name = gothic_wars_0019.b
		ai_chance = { base = 0 }
	}
}

gothic_wars.0020 = {
	type = character_event
	theme = war
	title = gothic_wars_0019.t
	desc = gothic_wars_0019.desc

	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {
		name = gothic_wars_0019.a
		custom_tooltip = gothic_wars_0019.a.tt
		hidden_effect = { start_hasdingi_migration_effect = yes }
		spawn_army = {
			name = "Vandal Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = root.capital_province
			inheritable = no
		}
		spawn_army = {
			name = "Vandal Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = root.capital_province
			inheritable = yes
		}
		ai_chance = { base = 100 }
	}
	option = {
		name = gothic_wars_0019.b
		ai_chance = { base = 0 }
	}
}

gothic_wars.0021 = {
	type = character_event
	theme = war
	title = gothic_wars_0019.t
	desc = gothic_wars_0019.desc

	left_portrait = {
		character = root
		animation = personality_bold
	}

	option = {
		name = gothic_wars_0019.a
		custom_tooltip = gothic_wars_0019.a.tt
		hidden_effect = { start_silingi_migration_effect = yes }
		spawn_army = {
			name = "Vandal Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = root.capital_province
			inheritable = no
		}
		spawn_army = {
			name = "Vandal Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = root.capital_province
			inheritable = yes
		}
		ai_chance = { base = 100 }
	}
	option = {
		name = gothic_wars_0019.b
		ai_chance = { base = 0 }
	}
}

gothic_wars.0022 = {
	scope = none
	hidden = yes

	immediate = {
		spawn_suebi_character_effect = yes
		create_dynamic_title = {
			tier = duchy
			name = {
				first_valid = {
					triggered_desc = {
						trigger = {
							faith = { has_doctrine = doctrine_gender_male_dominated }
						}
						desc = "Suebic Migrators"
					}
					#Fallback, just in case.
					desc = "Suebic Migrators"
				}
			}
		}
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
			add_claim_on_loss = no
		}
		scope:new_title = {
			set_capital_county = title:c_zatec
			set_landless_title = yes
			set_destroy_on_gain_same_tier = yes
			set_no_automatic_claims = yes
			set_can_be_named_after_dynasty = no
			change_title_holder = {
				holder = scope:suebi_king
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
		scope:new_title = {
			generate_coa = yes
			set_variable = {
				name = temporary_title
				value = yes
			}
		}
		scope:suebi_king = {
			add_prestige = 1500
			trigger_event = gothic_wars.0019
		}
	}
}

gothic_wars.0023 = {
	scope = none
	hidden = yes

	immediate = {
		if = {
			limit = {
				any_ruler = {
					culture = culture:vandal
					is_at_war = no
					OR = {
						is_independent_ruler = yes
						AND = {
							NOT = { culture = liege.culture }
							NOT = { culture = top_liege.culture }
						}
					}
				}
			}
			random_ruler = {
				limit = {
					culture = culture:vandal
					is_at_war = no
					OR = {
						is_independent_ruler = yes
						AND = {
							NOT = { culture = liege.culture }
							NOT = { culture = top_liege.culture }
						}
					}
				}
				save_scope_as = vandal_king1
				weight = {
					base = 1
					modifier = {
						add = 100
						has_title = title:d_hasdingi_vandals
					}
				}
			}
			scope:vandal_king1 = {
				trigger_event = gothic_wars.0020
			}
		}
		else = {
			spawn_vandal1_character_effect = yes
			create_dynamic_title = {
				tier = duchy
				name = {
					first_valid = {
						triggered_desc = {
							trigger = {
								faith = { has_doctrine = doctrine_gender_male_dominated }
							}
							desc = "Vandal Migrators"
						}
						#Fallback, just in case.
						desc = "Vandal Migrators"
					}
				}
			}
			create_title_and_vassal_change = {
				type = created
				save_scope_as = change
				add_claim_on_loss = no
			}
			scope:new_title = {
				set_capital_county = title:c_komarom
				set_landless_title = yes
				set_destroy_on_gain_same_tier = yes
				set_no_automatic_claims = yes
				set_can_be_named_after_dynasty = no
				change_title_holder = {
					holder = scope:vandal_king1
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change
			scope:new_title = {
				generate_coa = yes
				set_variable = {
					name = temporary_title
					value = yes
				}
			}
			scope:vandal_king1 = {
				add_prestige = 1500
				spawn_army = {
					name = "Vandal Migrators"
					levies = 1000
					men_at_arms = {
						type = bowmen
						stacks = 2
					}
					men_at_arms = {
						type = light_horsemen
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 2
					}
					location = province:522
					inheritable = no
				}
				spawn_army = {
					name = "Vandal Migrators"
					levies = 1000
					men_at_arms = {
						type = bowmen
						stacks = 2
					}
					men_at_arms = {
						type = light_horsemen
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 2
					}
					location = province:522
					inheritable = yes
				}
				trigger_event = gothic_wars.0020
			}
		}
	}
}

gothic_wars.0024 = {
	scope = none
	hidden = yes

	immediate = {
		if = {
			limit = {
				any_ruler = {
					culture = culture:vandal
					is_at_war = no
					NOT = { this = scope:vandal_king1 }
					OR = {
						is_independent_ruler = yes
						AND = {
							NOT = { culture = liege.culture }
							NOT = { culture = top_liege.culture }
						}
					}
				}
			}
			random_ruler = {
				limit = {
					culture = culture:vandal
					is_at_war = no
					NOT = { this = scope:vandal_king1 }
					OR = {
						is_independent_ruler = yes
						AND = {
							NOT = { culture = liege.culture }
							NOT = { culture = top_liege.culture }
						}
					}
				}
				save_scope_as = vandal_king2
				weight = {
					base = 1
					modifier = {
						add = 100
						has_title = title:d_silingi_vandals
					}
				}
			}
			scope:vandal_king2 = {
				trigger_event = gothic_wars.0021
			}
		}
		else = {
			spawn_vandal2_character_effect = yes
			create_dynamic_title = {
				tier = duchy
				name = {
					first_valid = {
						triggered_desc = {
							trigger = {
								faith = { has_doctrine = doctrine_gender_male_dominated }
							}
							desc = "Vandal Migrators"
						}
						#Fallback, just in case.
						desc = "Vandal Migrators"
					}
				}
			}
			create_title_and_vassal_change = {
				type = created
				save_scope_as = change
				add_claim_on_loss = no
			}
			scope:new_title = {
				set_capital_county = title:c_spreewald
				set_landless_title = yes
				set_destroy_on_gain_same_tier = yes
				set_no_automatic_claims = yes
				set_can_be_named_after_dynasty = no
				change_title_holder = {
					holder = scope:vandal_king2
					change = scope:change
				}
			}
			resolve_title_and_vassal_change = scope:change
			scope:new_title = {
				generate_coa = yes
				set_variable = {
					name = temporary_title
					value = yes
				}
			}
			scope:vandal_king2 = {
				add_prestige = 1500
				spawn_army = {
					name = "Vandal Migrators"
					levies = 1000
					men_at_arms = {
						type = bowmen
						stacks = 2
					}
					men_at_arms = {
						type = light_horsemen
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 2
					}
					location = province:3140
					inheritable = no
				}
				spawn_army = {
					name = "Vandal Migrators"
					levies = 1000
					men_at_arms = {
						type = bowmen
						stacks = 2
					}
					men_at_arms = {
						type = light_horsemen
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 2
					}
					location = province:3140
					inheritable = yes
				}
				trigger_event = gothic_wars.0021
			}
		}
	}
}

gothic_wars.0025 = {
	scope = none
	hidden = yes

	immediate = {
		spawn_alan_character_effect = yes
		create_dynamic_title = {
			tier = duchy
			name = {
				first_valid = {
					triggered_desc = {
						trigger = {
							faith = { has_doctrine = doctrine_gender_male_dominated }
						}
						desc = "Alan Migrators"
					}
					#Fallback, just in case.
					desc = "Alan Migrators"
				}
			}
		}
		create_title_and_vassal_change = {
			type = created
			save_scope_as = change
			add_claim_on_loss = no
		}
		scope:new_title = {
			set_capital_county = title:c_breisgau
			set_landless_title = yes
			set_destroy_on_gain_same_tier = yes
			set_no_automatic_claims = yes
			set_can_be_named_after_dynasty = no
			change_title_holder = {
				holder = scope:alan_king
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change
		scope:new_title = {
			generate_coa = yes
			set_variable = {
				name = temporary_title
				value = yes
			}
		}
		scope:alan_king = {
			add_prestige = 1500
			trigger_event = gothic_wars.0026
		}
	}
}

gothic_wars.0026 = {
	type = character_event
	theme = war
	title = gothic_wars_0019.t
	desc = gothic_wars_0019.desc

	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		root = {
			save_scope_as = alan_king
		}
	}

	option = {
		name = gothic_wars_0019.a
		custom_tooltip = gothic_wars_0019.a.tt
		hidden_effect = { start_alan_migration_effect = yes }
		spawn_army = {
			name = "Alan Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = province:2751
			inheritable = no
		}
		spawn_army = {
			name = "Alan Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = horse_archers
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = province:2751
			inheritable = no
		}
		spawn_army = {
			name = "Alan Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = light_horsemen
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = province:2751
			inheritable = yes
		}
		spawn_army = {
			name = "Alan Migrators"
			levies = 1000
			men_at_arms = {
				type = bowmen
				stacks = 2
			}
			men_at_arms = {
				type = horse_archers
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			location = province:2751
			inheritable = yes
		}
		ai_chance = { base = 100 }
	}
	option = {
		name = gothic_wars_0019.b
		ai_chance = { base = 0 }
	}
}